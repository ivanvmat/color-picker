"use strict";function ColorPickerControl(e){function t(e=360,n=0,o=100,l=255){this.h=e,this.s=n,this.v=o,this.a=l,Object.assign(t.prototype,{fromHSVa(e=0,t=0,n=0,o=255){this.h=e,this.s=t,this.v=n,this.a=o},toHSVa(){let e=(e,t)=>(n=-1)=>t(~n?e.map(e=>Number(e.toFixed(n))):e),t=[this.h,this.s,this.v,this.a];return t.toString=e(t,e=>`hsva(${e[0]}, ${e[1]}%, ${e[2]}%, ${this.a})`),t},fromHSLa(){},toHSLa(){let e=(e,t)=>(n=-1)=>t(~n?e.map(e=>Number(e.toFixed(n))):e),t=[...C.hsvToHsl(this.h,this.s,this.v),this.a];return t.toString=e(t,e=>`hsla(${e[0]}, ${e[1]}%, ${e[2]}%, ${this.a})`),t},fromRGBa(e=0,t=0,n=0,o=255){let l=C.rgbToHsv(e,t,n);null!=l?(this.h=l[0],this.s=l[1],this.v=l[2],this.a=o):console.error("Error while parsing rgb into hsv")},toRGBa(){let e=(e,t)=>(n=-1)=>t(~n?e.map(e=>Number(e.toFixed(n))):e),t=[...C.hsvToRgb(this.h,this.s,this.v),this.a];return t.toString=e(t,e=>`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${this.a})`),t},fromHEX(){},toHEX(){let e=C.hsvToHex(this.h,this.s,this.v);return`#${e.join("").toUpperCase()}`}}),this.dispose=function(){for(var e in this)delete this[e]}}function n(){let e,t,n,o,l,i=T.root.querySelector(".color-picker-wheel-control"),s=i.querySelector("canvas"),a=i.querySelector(".color-picker-wheel-control-thumb"),r=!1,u=this,c={change:[]};this.values={};let h=T.color.h;Object.defineProperty(this.values,"hue",{get:function(){return h},set:function(e){e>360&&(e=360),e<0&&(e=0),h=e,u.update(),p("change",u.values)},enumerable:!0,configurable:!0});let d=T.color.s;Object.defineProperty(this.values,"saturation",{get:function(){return d},set:function(e){e>100&&(e=100),e<0&&(e=0),d=e,u.update(),p("change",u.values)},enumerable:!0,configurable:!0});let p=function(e,...t){c[e].forEach(e=>e(...t,u))};this.on=function(e,t){return c[e].push(t),this},this.off=function(e,t){const n=c[e]||[],o=n.indexOf(t);return~o&&n.splice(o,1),this};let g=function(){v(()=>{f(),m(),b(),T.debug&&x()})},v=function(e){let t=document.createElement("canvas");t.height=t.width=512;let n=t.getContext("2d"),o=t.width/2,i=1/o;n.clearRect(0,0,t.width,t.height);let s=o,a=o;for(let e=0;e<360;e+=i){let t=e*(2*Math.PI)/360,l=o*Math.cos(t),i=o*Math.sin(t);n.strokeStyle="hsl("+e+", 100%, 50%)",n.beginPath(),n.moveTo(o,o),n.lineTo(s+l,a+i),n.stroke()}let r=n.createRadialGradient(s,a,0,s,s,o);r.addColorStop(0,"rgba(255, 255, 255, 1)"),r.addColorStop(1,"rgba(255, 255, 255, 0)"),n.fillStyle=r,n.beginPath(),n.arc(s,a,o,0,2*Math.PI,!0),n.closePath(),n.fill(),n.beginPath(),n.strokeStyle="rgb(38, 41, 50)",n.arc(s,a,o,0,2*Math.PI),n.stroke(),l=new Image,l.onload=function(){e()},l.src=t.toDataURL()},f=function(){let e=C.getBoundingBox(s);s.width=s.height=e.width;let t=s.getContext("2d");t.translate(s.width/2,s.height/2),t.rotate(90*Math.PI/180),t.translate(-s.width/2,-s.height/2),t.beginPath(),t.arc(s.width/2,s.width/2,s.width/2,0,2*Math.PI),t.clip(),t.closePath();let n=document.createElement("canvas"),o=10;n.width=2*o,n.height=2*o;var i=n.getContext("2d");let a="rgba(255, 255, 255, 1)",r="rgba(205, 205,205, 1)";i.beginPath(),i.fillStyle=a,i.fillRect(0,0,o,o),i.closePath(),i.beginPath(),i.fillStyle=r,i.fillRect(o,0,o,o),i.closePath(),i.beginPath(),i.fillStyle=r,i.fillRect(0,o,o,o),i.closePath(),i.beginPath(),i.fillStyle=a,i.fillRect(o,o,o,o),i.closePath();var u=t.createPattern(n,"repeat");t.beginPath(),t.fillStyle=u,t.fillRect(0,0,s.width,s.height),t.closePath(),t.filter="brightness("+T.color.v+"%)",t.beginPath(),t.strokeStyle="rgb(217, 214, 205)",t.arc(s.width/2,s.width/2,s.width/2,0,2*Math.PI),t.stroke(),t.closePath(),t.globalAlpha=T.color.a/255,t.drawImage(l,0,0,s.width,s.height)},m=function(){let e=C.getBoundingBox(s),t=C.getBoundingBox(a);var n=C.hsvToRgb(T.color.h,T.color.s,T.color.v);a.style.backgroundColor="rgb("+n[0]+","+n[1]+","+n[2]+")",r||(a.style.left=e.width/2+e.width/2/100*T.color.s*Math.cos(C.degreesToRadians(T.color.h+90))-t.width/2+"px",a.style.top=e.height/2+e.width/2/100*T.color.s*Math.sin(C.degreesToRadians(T.color.h+90))-t.height/2+"px"),a.dataset.value1=T.color.h,a.dataset.value2=T.color.s},b=function(){e=function(e){document.selection?document.selection.empty():window.getSelection().removeAllRanges(),r=!0},a.addEventListener("mousedown",e,!0),a.addEventListener("touchstart",e,!0),t=function(e){document.selection?document.selection.empty():window.getSelection().removeAllRanges(),r=!0;let t=e.touches?e.touches[0].pageX:e.pageX,n=e.touches?e.touches[0].pageY:e.pageY,o=C.getBoundingBox(s),l=C.getBoundingBox(a),i=o.width/2,c=t,h=n,d=o.left+o.width/2,g=o.top+o.height/2,v=360*Math.atan2(h-g,c-d)/(2*Math.PI)-90;v<0&&(v+=360),Math.sqrt((c-d)*(c-d)+(h-g)*(h-g))>i?(a.style.left=o.width/2+i*Math.cos(C.degreesToRadians(v+90))-l.width/2+"px",a.style.top=o.height/2+i*Math.sin(C.degreesToRadians(v+90))-l.height/2+"px"):(a.style.left=t-o.left-l.width/2+"px",a.style.top=n-o.top-l.height/2+"px"),o=C.getBoundingBox(s),l=C.getBoundingBox(a);let f=o.left+o.width/2-(l.left+l.width/2),m=o.top+o.height/2-(l.top+l.height/2),b=Math.sqrt(Math.pow(f,2)+Math.pow(m,2)),w=v,x=Math.min(100,Math.ceil(b/i*100));u.values.hue=w,u.values.saturation=x,a.dataset.value1=w,a.dataset.value2=x,p("change",u.values)},s.addEventListener("mousedown",t,!0),s.addEventListener("touchstart",t,!0),n=function(e){if(r){e.preventDefault(),e.stopImmediatePropagation();let t=e.touches?e.touches[0].pageX:e.pageX,n=e.touches?e.touches[0].pageY:e.pageY,o=C.getBoundingBox(s),l=C.getBoundingBox(a),i=o.width/2,r=t,c=n,h=o.left+o.width/2,d=o.top+o.height/2,g=360*Math.atan2(c-d,r-h)/(2*Math.PI)-90;g<0&&(g+=360),Math.sqrt((r-h)*(r-h)+(c-d)*(c-d))>i?(a.style.left=o.width/2+i*Math.cos(C.degreesToRadians(g+90))-l.width/2+"px",a.style.top=o.height/2+i*Math.sin(C.degreesToRadians(g+90))-l.height/2+"px"):(a.style.left=t-o.left-l.width/2+"px",a.style.top=n-o.top-l.height/2+"px"),o=C.getBoundingBox(s),l=C.getBoundingBox(a);let v=o.left+o.width/2-(l.left+l.width/2),f=o.top+o.height/2-(l.top+l.height/2),m=Math.sqrt(Math.pow(v,2)+Math.pow(f,2)),b=g,w=Math.min(100,Math.ceil(m/i*100));u.values.hue=b,u.values.saturation=w,a.dataset.value1=b,a.dataset.value2=w,p("change",u.values)}},document.addEventListener("mousemove",n,!0),document.addEventListener("touchmove",n,{passive:!1}),o=function(e){r=!1},document.addEventListener("mouseup",o,!0),document.addEventListener("touchend",o,!0)},w=function(){a.removeEventListener("mousedown",e,!1),a.removeEventListener("touchstart",e,!1),s.removeEventListener("mousedown",t,!1),s.removeEventListener("touchstart",t,!1),document.removeEventListener("mousemove",n,!1),document.removeEventListener("touchmove",n,!1),document.removeEventListener("mouseup",o,!1),document.removeEventListener("touchend",o,!1)},x=function(){let e=C.getBoundingBox(s),t=C.getBoundingBox(a);var n=s.getContext("2d");n.globalAlpha=1;let o=e.width/2,l=t.left+t.width/2,i=t.top+t.height/2,r=e.left+e.width/2,u=e.top+e.height/2,c=360*Math.atan2(i-u,l-r)/(2*Math.PI)-90;c<0&&(c+=360);let h=e.left+e.width/2-(t.left+t.width/2),d=e.top+e.height/2-(t.top+t.height/2),p=Math.sqrt(Math.pow(h,2)+Math.pow(d,2));if(p>0){n.beginPath(),n.setLineDash([3,3]),n.moveTo(e.width/2,e.height/2),n.lineTo(e.width/2+Math.cos(C.degreesToRadians(c))*p,e.height/2+Math.sin(C.degreesToRadians(c))*p),n.strokeStyle="rgba(0,0,0,0.5)",n.stroke(),n.closePath();var g=document.createElement("canvas");g.width=20,g.height=20;var v=g.getContext("2d");v.beginPath();let t="transparent",l="rgba(0,0,0,0.1)",i=20;for(var f=0;f<i;f++){var m=2;v.beginPath(),v.strokeStyle=f%2?t:l,v.lineWidth=m,v.moveTo(0,f*m+m/2),v.lineTo(100,f*m+m/2),v.stroke()}v.closePath();var b=n.createPattern(g,"repeat");n.beginPath(),n.setLineDash([3,3]),n.moveTo(e.width/2,e.height/2),n.arc(e.width/2,e.height/2,Math.min(o/2,p),0,C.degreesToRadians(c),!1),n.closePath(),n.strokeStyle="rgba(0,0,0,0.2)",n.fillStyle=b,n.fill(),n.stroke(),n.translate(s.width/2,s.height/2),n.rotate(-90*Math.PI/180),n.translate(-s.width/2,-s.height/2),n.beginPath(),n.font="8px serif",n.fillStyle="rgba(0,0,0,0.8)",n.fillText("H: "+Math.ceil(Math.min(360,T.color.h)),e.width/2-8,16),n.closePath(),n.beginPath(),n.font="8px serif",n.fillStyle="rgba(0,0,0,0.8)",n.fillText("S: "+Math.ceil(Math.min(100,T.color.s)),e.width/2-8,e.height-20+8),n.closePath()}};this.update=function(e){f(),m(),T.debug&&x()},this.dispose=function(){for(var c in w(),e=null,t=null,n=null,o=null,h=null,d=null,i=null,s=null,a=null,r=null,u=null,l=null,g=null,v=null,f=null,m=null,b=null,w=null,x=null,this)delete this[c]},g()}function o(){let e,t,n,o,l=T.root.querySelector(".color-picker-brightness-control"),i=l.querySelector("canvas"),s=l.querySelector(".color-picker-brightness-control-thumb"),a=!1,r=this,u={change:[]},c=T.color.v;Object.defineProperty(r,"value",{get:function(){return c},set:function(e){e>100&&(e=100),e<0&&(e=0),c=e,r.update(),h("change",r.value)},enumerable:!0,configurable:!0});let h=function(e,...t){u[e].forEach(e=>e(...t,r))};this.on=function(e,t){return u[e].push(t),this},this.off=function(e,t){const n=u[e]||[],o=n.indexOf(t);return~o&&n.splice(o,1),this};let d=function(){p(),g(),v(),T.debug&&m()},p=function(){let e=C.getBoundingBox(i);i.width=e.width,i.height=e.height;var t=i.getContext("2d").createLinearGradient(0,0,0,i.height),n=C.hsvToRgb(T.color.h,T.color.s,100);let o=[0,0,0];t.addColorStop(0,"rgb("+n[0]+","+n[1]+","+n[2]+")"),t.addColorStop(1,"rgb("+o[0]+","+o[1]+","+o[2]+")"),i.getContext("2d").fillStyle=t,i.getContext("2d").fillRect(0,0,i.width,i.height)},g=function(){let e=C.getBoundingBox(i),t=C.getBoundingBox(s);var n=C.hsvToRgb(T.color.h,T.color.s,T.color.v);s.style.backgroundColor="rgb("+n[0]+","+n[1]+","+n[2]+")",s.style.left=e.width/2-t.width/2+"px",a||(s.style.top=-t.height/2+e.height*((100-r.value)/100)+"px"),s.dataset.value=r.value},v=function(){e=function(e){document.selection?document.selection.empty():window.getSelection().removeAllRanges(),a=!0},s.addEventListener("mousedown",e,!0),s.addEventListener("touchstart",e,!0),t=function(e){document.selection?document.selection.empty():window.getSelection().removeAllRanges(),a=!0;let t=e.touches?e.touches[0].pageY:e.pageY,n=C.getBoundingBox(i),o=C.getBoundingBox(s);s.style.left=n.width/2-o.width/2+"px",n.top<=t+o.height/2&&t+o.height/2<=n.top+n.height?s.style.top=t-n.top+"px":n.top>t+o.height/2?s.style.top=-o.height/2+"px":s.style.top=n.height-o.height/2+"px",n=C.getBoundingBox(i),o=C.getBoundingBox(s);let l=100-(o.top+o.height/2-n.top)/n.height*100;r.value=l,s.dataset.value=l,h("change",r.value)},i.addEventListener("mousedown",t,!0),i.addEventListener("touchstart",t,!0),n=function(e){if(a){e.preventDefault(),e.stopImmediatePropagation();let t=e.touches?e.touches[0].pageY:e.pageY,n=C.getBoundingBox(i),o=C.getBoundingBox(s);s.style.left=n.width/2-o.width/2+"px",n.top<=t+o.height/2&&t+o.height/2<=n.top+n.height?s.style.top=t-n.top+"px":n.top>t+o.height/2?s.style.top=-o.height/2+"px":s.style.top=n.height-o.height/2+"px",n=C.getBoundingBox(i),o=C.getBoundingBox(s);let l=100-(o.top+o.height/2-n.top)/n.height*100;r.value=l,s.dataset.value=l,h("change",r.value)}},document.addEventListener("mousemove",n,!0),document.addEventListener("touchmove",n,{passive:!1}),o=function(e){a=!1},document.addEventListener("mouseup",o,!0),document.addEventListener("touchend",o,!0)},f=function(){s.removeEventListener("mousedown",e,!1),s.removeEventListener("touchstart",e,!1),i.removeEventListener("mousedown",t,!1),i.removeEventListener("touchstart",t,!1),document.removeEventListener("mousemove",n,!1),document.removeEventListener("touchmove",n,!1),document.removeEventListener("mouseup",o,!1),document.removeEventListener("touchend",o,!1)},m=function(){let e=C.getBoundingBox(i),t=C.getBoundingBox(s),n=e.top+e.height-(t.top+t.height/2);var o=i.getContext("2d");n>0&&(o.beginPath(),o.setLineDash([3,3]),o.moveTo(e.width/2,e.height),o.lineTo(e.width/2,e.height-n),o.strokeStyle="rgba(0,0,0,0.5)",o.stroke(),o.closePath())};this.update=function(e){p(),g(),T.debug&&m()},this.dispose=function(){for(var u in f(),e=null,t=null,n=null,o=null,c=null,l=null,i=null,s=null,r=null,a=null,d=null,p=null,g=null,v=null,f=null,m=null,this)delete this[u]},d()}function l(e){this.root=e,this.min=Number(e.dataset.min),this.max=Number(e.dataset.max),this.step=Number(e.dataset.step)||1;let t,n,o,l,i=this,s=e.querySelector(".range-input"),a=e.querySelector(".range-input-progress"),r=e.querySelector(".range-input-value"),u=document.createElement("div"),c=!1,h=!1,d={focus:[],blur:[],change:[]},p=Number(e.dataset.value)||0;Object.defineProperty(i,"value",{get:function(){return p},set:function(e){null!=i.max&&e>i.max&&(e=i.max),null!=i.min&&e<i.min&&(e=i.min),p=C.round(Number(e),C.countDecimals(i.step)),s.value=p,r.innerHTML=p,null!=i.max&&(a.style.width=p/i.max*100+"%"),v("change",i.value)},enumerable:!0,configurable:!0});let g=!1;Object.defineProperty(i,"isFocused",{get:function(){return g},set:function(e){g=e,g?(i.root.classList.add("range-input-control--focused"),v("focus",i)):(v("blur",i),i.root.classList.remove("range-input-control--focused"))},enumerable:!0,configurable:!0});let v=function(e,...t){d[e].forEach(e=>e(...t,i))};this.on=function(e,t){return d[e].push(t),this},this.off=function(e,t){const n=d[e]||[],o=n.indexOf(t);return~o&&n.splice(o,1),this};let f=function(){s.value=i.value,r.innerHTML=Number(i.value).toFixed(C.countDecimals(i.step)),null!=i.max&&(a.style.width=i.value/i.max*100%NaN),u.classList.add("cursor-folding-screen"),m()},m=function(){n=function(e){if(e.stopPropagation(),i.root.classList.contains("range-input-control--disabled")||i.root.classList.contains("range-input-control--mouse-move-mode")||i.root.classList.contains("range-input-control--key-input-mode"))return;i.isFocused=!0;let n=e.touches?e.touches[0].pageX:e.pageX;e.touches?e.touches[0].pageY:e.pageY;c=!0,h=!0,t=n,document.body.appendChild(u),u.focus(),i.root.classList.contains("range-input-control--mouse-move-mode")||i.root.classList.add("range-input-control--mouse-move-mode");let o=i.root.getBoundingClientRect(),l=function(e){if(!h)return;c=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();let n=e.touches?e.touches[0].pageX:e.pageX,l=(e.touches?e.touches[0].pageY:e.pageY,(n-t)/o.width*(i.max-i.min));0==n?i.value=i.value-i.step:n==window.screen.width-1?i.value=i.value+i.step:i.value=i.value+l,t=n},a=function(e){h&&(h=!1,i.root.classList.contains("range-input-control--mouse-move-mode")&&i.root.classList.remove("range-input-control--mouse-move-mode"),null!=u&&null!=u.parentNode&&document.body.removeChild(u)),c?(i.root.classList.contains("range-input-control--key-input-mode")||i.root.classList.add("range-input-control--key-input-mode"),s.focus(),s.select()):i.isFocused=!1,document.removeEventListener("mousemove",l,!1),document.removeEventListener("touchmove",l,!1)};document.addEventListener("mouseup",a,{once:!0}),document.addEventListener("touchend",a,{once:!0}),document.addEventListener("mousemove",l,{passive:!1}),document.addEventListener("touchmove",l,{passive:!1})},i.root.addEventListener("mousedown",n,!0),i.root.addEventListener("touchstart",n,!0),o=function(e){i.root.classList.contains("range-input-control--key-input-mode")&&i.root.classList.remove("range-input-control--key-input-mode"),this.value=i.value,i.isFocused=!1},s.addEventListener("focusout",o),l=function(e){27===e.keyCode&&(e.preventDefault(),i.root.classList.contains("range-input-control--key-input-mode")&&i.root.classList.remove("range-input-control--key-input-mode"),this.value=i.value,i.isFocused=!1),13===e.keyCode&&(e.preventDefault(),i.root.classList.contains("range-input-control--key-input-mode")&&i.root.classList.remove("range-input-control--key-input-mode"),i.value=this.value,i.isFocused=!1)},s.addEventListener("keyup",l)},b=function(){i.root.removeEventListener("mousedown",n,!1),i.root.removeEventListener("touchstart",n,!1),s.removeEventListener("focusout",o,!1),s.removeEventListener("keyup",l,!1)};this.dispose=function(){for(var e in b(),n=null,o=null,l=null,this.root.parentNode.removeChild(this.root),this.root=null,this.min=null,this.max=null,this.step=null,s=null,a=null,r=null,u=null,c=null,h=null,t=null,d.focus.splice(0,d.focus.length),d.focus=null,d.blur.splice(0,d.blur.length),d.blur=null,d.change.splice(0,d.change.length),d.change=null,d=null,p=null,g=null,i=null,v=null,f=null,m=null,b=null,this)delete this[e]},f()}function i(e){this.root=e,this.isAlphanumeric=e.dataset.isAlphanumeric||!1;let t,n,o,l,i=this,s=e.querySelector(".text-input"),a=e.querySelector(".text-input-value"),r={focus:[],blur:[],change:[]},u=e.dataset.value||"";Object.defineProperty(i,"value",{get:function(){return u},set:function(e){u=e,s.value=u,a.innerHTML=u,h("change",i.value)},enumerable:!0,configurable:!0});let c=!1;Object.defineProperty(i,"isFocused",{get:function(){return c},set:function(e){c=e,c?(i.root.classList.add("text-input-control--focused"),h("focus",i)):(h("blur",i),i.root.classList.remove("text-input-control--focused"))},enumerable:!0,configurable:!0});let h=function(e,...t){r[e].forEach(e=>e(...t,i))};this.on=function(e,t){return r[e].push(t),this},this.off=function(e,t){const n=r[e]||[],o=n.indexOf(t);return~o&&n.splice(o,1),this};let d=function(){s.value=i.value,a.innerHTML=i.value,p()},p=function(){t=function(e){if(e.stopPropagation(),i.root.classList.contains("text-input-control--disabled"))return;i.isFocused=!0;let t=function(e){s.focus(),s.select()};document.addEventListener("mouseup",t,{once:!0}),document.addEventListener("touchend",t,{once:!0})},i.root.addEventListener("mousedown",t,!0),i.root.addEventListener("touchstart",t,!0),n=function(e){this.value=i.value,i.isFocused=!1},s.addEventListener("focusout",n,!0),o=function(e){var t=e.keyCode||e.charCode;i.isAlphanumeric&&(!e.key.match(/[a-zA-Z0-9]/)||0==document.getSelection().toString().length&&37!==t&&39!==t&&6==this.value.length&&8!=t&&46!=t)&&e.preventDefault()},s.addEventListener("keydown",o,!0),l=function(e){27===e.keyCode&&(e.preventDefault(),this.value=i.value,i.isFocused=!1),13===e.keyCode&&(e.preventDefault(),i.value=this.value,i.isFocused=!1)},s.addEventListener("keyup",l,!0)},g=function(){i.root.removeEventListener("mousedown",t,!1),i.root.removeEventListener("touchstart",t,!1),s.removeEventListener("focusout",n,!1),s.removeEventListener("keydown",o,!1),s.removeEventListener("keyup",l,!1)};this.dispose=function(){for(var v in g(),t=null,n=null,o=null,l=null,this.value=null,this.isFocused=null,this.root.parentNode.removeChild(this.root),this.root=null,this.isAlphanumeric=null,u=null,c=null,e=null,r.focus.splice(0,r.focus.length),r.focus=null,r.blur.splice(0,r.blur.length),r.blur=null,r.change.splice(0,r.change.length),r.change=null,r=null,s=null,a=null,i=null,h=null,d=null,p=null,g=null,this)delete this[v]},d()}let s,a,r,u,c,h,d,p,g,v,f,m,b,w,x,y,L,k,E,S,B,P,M=Object.assign({container:document.body,theme:"dark",debug:!1},e),T=this,R=this,C={hsvToHsl:function(e,t,n){t/=100,n/=100;const o=(2-t)*n/2;return 0!==o&&(t=1===o?0:o<.5?t*n/(2*o):t*n/(2-2*o)),[e,100*t,100*o]},hslToHsv:function(e,t,n){t/=100,n/=100,t*=n<.5?n:1-n;const o=2*t/(n+t)*100,l=100*(n+t);return[e,isNaN(o)?0:o,l]},hsvToRgb:function(e,t,n){e=e/360*6,t/=100,n/=100;const o=Math.floor(e),l=e-o,i=n*(1-t),s=n*(1-l*t),a=n*(1-(1-l)*t),r=o%6,u=[n,s,i,i,a,n][r],c=[a,n,n,s,i,i][r],h=[i,i,a,n,n,s][r];return[255*u,255*c,255*h]},rgbToHsv:function(e,t,n){e/=255,t/=255,n/=255;const o=Math.min(e,t,n),l=Math.max(e,t,n),i=l-o;let s,a;const r=l;if(0===i)s=a=0;else{a=i/l;const o=((l-e)/6+i/2)/i,r=((l-t)/6+i/2)/i,u=((l-n)/6+i/2)/i;e===l?s=u-r:t===l?s=1/3+o-u:n===l&&(s=2/3+r-o),s<0?s+=1:s>1&&(s-=1)}return[360*s,100*a,100*r]},hsvToHex:function(e,t,n){return C.hsvToRgb(e,t,n).map(e=>Math.round(e).toString(16).padStart(2,"0"))},hexToHsv:function(e){return C.rgbToHsv(...e.match(/.{2}/g).map(e=>parseInt(e,16)))},hexToRgb:function(e){var t,n,o;return"#"==e.charAt(0)&&(e=e.substr(1)),3==e.length&&(e=e.substr(0,1)+e.substr(0,1)+e.substr(1,2)+e.substr(1,2)+e.substr(2,3)+e.substr(2,3)),t=e.charAt(0)+""+e.charAt(1),n=e.charAt(2)+""+e.charAt(3),o=e.charAt(4)+""+e.charAt(5),t=parseInt(t,16),n=parseInt(n,16),o=parseInt(o,16),[t,n,o]},getBoundingBox:function(e){let t=e.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop),left:t.left+(window.pageXOffset||document.documentElement.scrollLeft),width:t.width,height:t.height}},degreesToRadians:function(e){return e*(Math.PI/180)},countDecimals:function(e){return Math.floor(e.valueOf())===e.valueOf()?0:e.toString().split(".")[1].length||0},round:function(e,t){let n=Number(Math.round(e+"e"+t)+"e-"+t);return isNaN(n)?0:n}},H={open:[],change:[],close:[]};this.root,this.container=M.container,this.debug=M.debug;let q=new t;Object.defineProperty(R,"color",{get:function(){return q},set:function(e){e instanceof t&&(q=e,A("change",R.value))},enumerable:!0,configurable:!0});let A=function(e,...t){H[e].forEach(e=>e(...t,R))};this.on=function(e,t){return H[e].push(t),this},this.off=function(e,t){const n=H[e]||[],o=n.indexOf(t);return~o&&n.splice(o,1),this};let N=function(){let e=document.createElement("div");e.innerHTML='\n            <div class="color-picker">\n        \n            <div class="color-picker-controls">\n                <div class="color-picker-controls-group" style="display: flex; flex-direction: row;height: 160px;">\n        \n                    <div class="color-picker-wheel-control">\n                        <canvas id="wheel-canvas" class="wheel-canvas"></canvas>\n                        <div class="color-picker-wheel-control-thumb" style="top:50%; left: 50%;"></div>\n                    </div>\n        \n                    <div class="color-picker-brightness-control">\n                        <canvas id="brightness-canvas" class="brightness-canvas"></canvas>\n                        <div class="color-picker-brightness-control-thumb" style="bottom: 0; left: 50%;"></div>\n                    </div>\n        \n                </div>\n                <div class="color-picker-controls-group" style="flex: 1; padding-top: 0;">\n\n                    <div class="color-picker-input-controls">\n                        <div class="color-picker-input-controls-tab-headers">\n                            <button data-tab="rgb">RGB</button>\n                            <button data-tab="hsv" class="selected">HSV</button>\n                            <button data-tab="hex">HEX</button>\n                        </div>\n                        <div class="color-picker-input-controls-tabs">\n\n                            <div class="color-picker-input-controls-tab" data-tab="rgb">\n                                <div class="color-picker-red-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="255">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">R:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                                <div class="color-picker-green-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="255">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">G:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                                <div class="color-picker-blue-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="255">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">B:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="color-picker-input-controls-tab selected" data-tab="hsv">\n                                <div class="color-picker-hue-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="360">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">H:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                                <div class="color-picker-saturation-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="100">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">S:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                                <div class="color-picker-brightness-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="100">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">V:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="color-picker-input-controls-tab" data-tab="hex">\n                                <div class="color-picker-hex-input text-input-control" data-value="000000" data-is-alphanumeric="true">\n                                    <div class="text-input-enter-block">\n                                        <input class="text-input" type="text">\n                                    </div>\n                                    <div class="text-input-details-block">\n                                        <span class="text-input-label">Hex:</span>\n                                        <span class="text-input-value">000000</span>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="color-picker-alpha-input range-input-control" data-value="255" data-step="0.01" data-min="0" data-max="255">\n                                <div class="range-input-enter-block">\n                                    <input class="range-input" type="number">\n                                </div>\n                                <div class="range-input-details-block">\n                                    <span class="range-input-progress"></span>\n                                    <span class="range-input-label">A:</span>\n                                    <span class="range-input-value">0.00</span>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n        \n                </div>\n            </div>\n        \n        </div>\n        '.trim(),R.root=e.firstElementChild,R.root.dataset.theme=M.theme,R.container.appendChild(R.root),s=new n,a=new o,r=R.root.querySelectorAll(".color-picker-input-controls-tab-headers button"),h=new l(R.root.querySelector(".color-picker-red-input")),d=new l(R.root.querySelector(".color-picker-green-input")),p=new l(R.root.querySelector(".color-picker-blue-input")),g=new l(R.root.querySelector(".color-picker-hue-input")),v=new l(R.root.querySelector(".color-picker-saturation-input")),f=new l(R.root.querySelector(".color-picker-brightness-input")),m=new i(R.root.querySelector(".color-picker-hex-input")),b=new l(R.root.querySelector(".color-picker-alpha-input")),I(),R.update(),A("open")},I=function(){w=function(e){r.forEach(e=>e.classList.remove("selected")),R.root.querySelectorAll(".color-picker-input-controls-tab").forEach(e=>e.classList.remove("selected")),e.target.classList.add("selected"),R.root.querySelector('.color-picker-input-controls-tab[data-tab="'+e.target.dataset.tab+'"]').classList.add("selected")},r.forEach(e=>{e.addEventListener("click",w)}),u=function(e){R.color.h=e.hue,R.color.s=e.saturation,R.update()},s.on("change",u),c=function(e){R.color.v=e,R.update()},a.on("change",c),x=function(e){R.color.h=e,R.update()},g.on("change",x),y=function(e){R.color.s=e,R.update()},v.on("change",y),L=function(e){R.color.v=e,R.update()},f.on("change",L),k=function(e){let t=C.rgbToHsv(h.value,d.value,p.value);R.color.h=t[0],R.color.s=t[1],R.color.v=t[2],R.update()},h.on("change",k),E=function(e){let t=C.rgbToHsv(h.value,d.value,p.value);R.color.h=t[0],R.color.s=t[1],R.color.v=t[2],R.update()},d.on("change",E),S=function(e){let t=C.rgbToHsv(h.value,d.value,p.value);R.color.h=t[0],R.color.s=t[1],R.color.v=t[2],R.update()},p.on("change",S),P=function(e){let t=C.hexToRgb(m.value),n=C.rgbToHsv(t[0],t[1],t[2]);R.color.h=n[0],R.color.s=n[1],R.color.v=n[2],R.update()},m.on("change",P),B=function(e){R.color.a=e,R.update()},b.on("change",B)},O=function(){r.forEach(e=>e.removeEventListener("click",w)),s.off("change",u),a.off("change",c),g.off("change",x),v.off("change",y),f.off("change",L),h.off("change",k),d.off("change",E),p.off("change",S),m.off("change",P),b.off("change",B)};this.update=function(e=!0){O();let t=C.hsvToRgb(R.color.h,R.color.s,R.color.v),n=C.hsvToHex(R.color.h,R.color.s,R.color.v);g.value=R.color.h,v.value=R.color.s,f.value=R.color.v,h.value=t[0],d.value=t[1],p.value=t[2],m.value=n.join("").toUpperCase(),s.values.hue=R.color.h,s.values.saturation=R.color.s,a.value=R.color.v,b.value=R.color.a,I(),e&&A("change",this.color)},this.dispose=function(){for(var e in O(),this.color.dispose(),this.color=null,this.debug=null,this.root.parentNode.removeChild(this.root),this.root=null,w=null,u=null,c=null,x=null,y=null,L=null,k=null,E=null,S=null,B=null,P=null,M=null,T=null,R=null,C=null,H.open.splice(0,H.open.length),H.open=null,H.change.splice(0,H.change.length),H.change=null,H.close.splice(0,H.close.length),H.close=null,H=null,
s.dispose(),s=null,a.dispose(),a=null,r=null,h.dispose(),h=null,d.dispose(),d=null,p.dispose(),p=null,g.dispose(),g=null,v.dispose(),v=null,f.dispose(),f=null,m.dispose(),m=null,b.dispose(),b=null,A=null,N=null,I=null,O=null,this)delete this[e]},N()}