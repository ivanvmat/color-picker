"use strict";function ColorPickerControl(e){function t(e=360,t=0,n=100,o=255){this.h=e,this.s=t,this.v=n,this.a=o;let l={change:[]},u=function(e,...t){l[e].forEach(e=>e(...t,s))};this.on=function(e,t){return l[e]=l[e]||[],l[e].push(t),this},this.off=function(e,t){const n=l[e]||[],o=n.indexOf(t);return~o&&n.splice(o,1),this},this.fromHSVa=function(e=0,t=0,n=0,o=255){return this.h=e,this.s=t,this.v=n,this.a=o,u("change",this),this},this.toHSV=function(){let e=(e,t)=>(n=-1)=>t(~n?e.map(e=>Number(e.toFixed(n))):e),t=[this.h,this.s,this.v];return t.toString=e(t,e=>`hsv(${e[0]}, ${e[1]}%, ${e[2]}%)`),t},this.toHSVa=function(){let e=(e,t)=>(n=-1)=>t(~n?e.map(e=>Number(e.toFixed(n))):e),t=[this.h,this.s,this.v,this.a];return t.toString=e(t,e=>`hsva(${e[0]}, ${e[1]}%, ${e[2]}%, ${this.a})`),t},this.fromHSLa=function(e,t,n,o=255){let l=c.hslToHsv(e,t,n);return null!=l?(this.h=l[0]||0,this.s=l[1]||0,this.v=l[2]||0,this.a=o):console.error("Error while parsing hsl into hsv"),u("change",this),this},this.toHSL=function(){let e=(e,t)=>(n=-1)=>t(~n?e.map(e=>Number(e.toFixed(n))):e),t=[...c.hsvToHsl(this.h,this.s,this.v)];return t.toString=e(t,e=>`hsl(${e[0]}, ${e[1]}%, ${e[2]}%)`),t},this.toHSLa=function(){let e=(e,t)=>(n=-1)=>t(~n?e.map(e=>Number(e.toFixed(n))):e),t=[...c.hsvToHsl(this.h,this.s,this.v),this.a];return t.toString=e(t,e=>`hsla(${e[0]}, ${e[1]}%, ${e[2]}%, ${this.a})`),t},this.fromRGBa=function(e=0,t=0,n=0,o=255){let l=c.rgbToHsv(e,t,n);return null!=l?(this.h=l[0]||0,this.s=l[1]||0,this.v=l[2]||0,this.a=o):console.error("Error while parsing rgb into hsv"),u("change",this),this},this.toRGB=function(){let e=(e,t)=>(n=-1)=>t(~n?e.map(e=>Number(e.toFixed(n))):e),t=[...c.hsvToRgb(this.h,this.s,this.v)];return t.toString=e(t,e=>`rgb(${e[0]}, ${e[1]}, ${e[2]})`),t},this.toRGBa=function(){let e=(e,t)=>(n=-1)=>t(~n?e.map(e=>Number(e.toFixed(n))):e),t=[...c.hsvToRgb(this.h,this.s,this.v),this.a];return t.toString=e(t,e=>`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${this.a})`),t},this.fromHEX=function(e,t=255){e=e.trim().toLowerCase().replace(/ /g,"").replace(/[^A-Za-z0-9\s]/g,"");let n=c.hexToHsv(e.padEnd(6,"0"));return null!=n?(this.h=n[0]||0,this.s=n[1]||0,this.v=n[2]||0,this.a=t):console.error("Error while parsing hex into hsv"),u("change",this),this},this.toHEX=function(){let e=c.hsvToHex(this.h,this.s,this.v);return`#${e.join("").toUpperCase()}`},this.dispose=function(){for(var e in l.change.splice(0,l.change.length),l.change=null,u=null,this)delete this[e]}}function n({color_picker:e=null}){let t,n=this,o=e.root.querySelector(".color-picker-wheel-control"),l=o.querySelector("canvas"),u=document.createElement("canvas"),i=o.querySelector(".color-picker-wheel-control-thumb"),s=!1,a={thumb_mousedown:null,canvas_mousedown:null,document_mousemove:null,document_mouseup:null},r={change:[]};this.values={};let h=e.color.h;Object.defineProperty(this.values,"hue",{get:function(){return h},set:function(e){null!=e&&(e>360&&(e=360),e<0&&(e=0),h=e,n.update())},enumerable:!0,configurable:!0});let p=e.color.s;Object.defineProperty(this.values,"saturation",{get:function(){return p},set:function(e){null!=e&&(e>100&&(e=100),e<0&&(e=0),p=e,n.update())},enumerable:!0,configurable:!0});let d=function(e,...t){r[e].forEach(e=>e(...t,n))};this.on=function(e,t){return r[e]=r[e]||[],r[e].push(t),this},this.off=function(e,t){const n=r[e]||[],o=n.indexOf(t);return~o&&n.splice(o,1),this};let g=async function(){await v(),m(),_(),f()},v=async function(){return new Promise((e,n)=>{let o=document.createElement("canvas");o.width=o.height=512;let l=o.getContext("2d"),u=o.width/2,i=1/u;l.clearRect(0,0,o.width,o.height);let s=u,a=u;for(let e=0;e<360;e+=i){let t=e*(2*Math.PI)/360,n=u*Math.cos(t),o=u*Math.sin(t);l.strokeStyle="hsl("+e+", 100%, 50%)",l.beginPath(),l.moveTo(u,u),l.lineTo(s+n,a+o),l.stroke()}let r=l.createRadialGradient(s,a,0,s,s,u);r.addColorStop(0,"rgba(255, 255, 255, 1)"),r.addColorStop(1,"rgba(255, 255, 255, 0)"),l.fillStyle=r,l.beginPath(),l.arc(s,a,u,0,2*Math.PI,!0),l.closePath(),l.fill(),l.beginPath(),l.strokeStyle="rgb(38, 41, 50)",l.arc(s,a,u,0,2*Math.PI),l.stroke(),t=new Image,t.onload=(()=>e()),t.src=o.toDataURL()})},m=function(){let n=c.getBoundingBox(l);l.width=l.height=n.width,u.width=u.height=n.width;let o=l.getContext("2d"),i=u.getContext("2d");o.translate(l.width/2,l.height/2),o.rotate(90*Math.PI/180),o.translate(-l.width/2,-l.height/2),o.beginPath(),o.arc(l.width/2,l.width/2,l.width/2,0,2*Math.PI),o.clip(),o.closePath();let s=document.createElement("canvas"),a=10;s.width=2*a,s.height=2*a;let r=s.getContext("2d"),h="rgba(255, 255, 255, 1)",p="rgba(205, 205,205, 1)";r.beginPath(),r.fillStyle=h,r.fillRect(0,0,a,a),r.closePath(),r.beginPath(),r.fillStyle=p,r.fillRect(a,0,a,a),r.closePath(),r.beginPath(),r.fillStyle=p,r.fillRect(0,a,a,a),r.closePath(),r.beginPath(),r.fillStyle=h,r.fillRect(a,a,a,a),r.closePath();let d=o.createPattern(s,"repeat");o.beginPath(),o.fillStyle=d,o.fillRect(0,0,l.width,l.height),o.closePath(),o.beginPath(),o.strokeStyle="rgb(217, 214, 205)",o.arc(l.width/2,l.width/2,l.width/2,0,2*Math.PI),o.stroke(),o.closePath(),i.drawImage(t,0,0,l.width,l.height),i.fillStyle="rgba(0, 0, 0, "+Math.abs(1-e.color.v/100)+")",i.fillRect(0,0,l.width,l.height),o.globalAlpha=e.color.a/255,o.drawImage(u,0,0,l.width,l.height)},_=function(){let t=c.getBoundingBox(l),n=c.getBoundingBox(i);i.style.backgroundColor=e.color.toRGB().toString(),s||(i.style.left=t.width/2+t.width/2/100*e.color.s*Math.cos(c.degreesToRadians(e.color.h+90))-n.width/2+"px",i.style.top=t.height/2+t.width/2/100*e.color.s*Math.sin(c.degreesToRadians(e.color.h+90))-n.height/2+"px"),i.dataset.value1=e.color.h,i.dataset.value2=e.color.s},f=function(){a.thumb_mousedown=function(e){document.selection?document.selection.empty():window.getSelection().removeAllRanges(),s=!0},i.addEventListener("mousedown",a.thumb_mousedown,!0),i.addEventListener("touchstart",a.thumb_mousedown,!0),a.canvas_mousedown=function(e){document.selection?document.selection.empty():window.getSelection().removeAllRanges(),s=!0;let t=e.touches?e.touches[0].pageX:e.pageX,o=e.touches?e.touches[0].pageY:e.pageY,u=c.getBoundingBox(l),a=c.getBoundingBox(i),r=u.width/2,h=t,p=o,g=u.left+u.width/2,v=u.top+u.height/2,m=360*Math.atan2(p-v,h-g)/(2*Math.PI)-90;m<0&&(m+=360),Math.sqrt((h-g)*(h-g)+(p-v)*(p-v))>r?(i.style.left=u.width/2+r*Math.cos(c.degreesToRadians(m+90))-a.width/2+"px",i.style.top=u.height/2+r*Math.sin(c.degreesToRadians(m+90))-a.height/2+"px"):(i.style.left=t-u.left-a.width/2+"px",i.style.top=o-u.top-a.height/2+"px"),u=c.getBoundingBox(l),a=c.getBoundingBox(i);let _=u.left+u.width/2-(a.left+a.width/2),f=u.top+u.height/2-(a.top+a.height/2),b=Math.sqrt(Math.pow(_,2)+Math.pow(f,2)),w=m,x=Math.min(100,Math.ceil(b/r*100));n.values.hue=w,n.values.saturation=x,i.dataset.value1=w,i.dataset.value2=x,d("change",n.values)},l.addEventListener("mousedown",a.canvas_mousedown,!0),l.addEventListener("touchstart",a.canvas_mousedown,!0),a.document_mousemove=function(e){if(s){e.preventDefault(),e.stopImmediatePropagation();let t=e.touches?e.touches[0].pageX:e.pageX,o=e.touches?e.touches[0].pageY:e.pageY,u=c.getBoundingBox(l),s=c.getBoundingBox(i),a=u.width/2,r=t,h=o,p=u.left+u.width/2,g=u.top+u.height/2,v=360*Math.atan2(h-g,r-p)/(2*Math.PI)-90;v<0&&(v+=360),Math.sqrt((r-p)*(r-p)+(h-g)*(h-g))>a?(i.style.left=u.width/2+a*Math.cos(c.degreesToRadians(v+90))-s.width/2+"px",i.style.top=u.height/2+a*Math.sin(c.degreesToRadians(v+90))-s.height/2+"px"):(i.style.left=t-u.left-s.width/2+"px",i.style.top=o-u.top-s.height/2+"px"),u=c.getBoundingBox(l),s=c.getBoundingBox(i);let m=u.left+u.width/2-(s.left+s.width/2),_=u.top+u.height/2-(s.top+s.height/2),f=Math.sqrt(Math.pow(m,2)+Math.pow(_,2)),b=v,w=Math.min(100,Math.ceil(f/a*100));n.values.hue=b,n.values.saturation=w,i.dataset.value1=b,i.dataset.value2=w,d("change",n.values)}},document.addEventListener("mousemove",a.document_mousemove,!0),document.addEventListener("touchmove",a.document_mousemove,{passive:!1}),a.document_mouseup=function(e){s=!1},document.addEventListener("mouseup",a.document_mouseup,!0),document.addEventListener("touchend",a.document_mouseup,!0)},b=function(){i.removeEventListener("mousedown",a.thumb_mousedown,!1),i.removeEventListener("touchstart",a.thumb_mousedown,!1),l.removeEventListener("mousedown",a.canvas_mousedown,!1),l.removeEventListener("touchstart",a.canvas_mousedown,!1),document.removeEventListener("mousemove",a.document_mousemove,!1),document.removeEventListener("touchmove",a.document_mousemove,!1),document.removeEventListener("mouseup",a.document_mouseup,!1),document.removeEventListener("touchend",a.document_mouseup,!1)};this.update=function(e){m(),_()},this.dispose=function(){for(var e in b(),this.values=null,h=null,p=null,a.thumb_mousedown=null,a.canvas_mousedown=null,a.document_mousemove=null,a.document_mouseup=null,r.change.splice(0,r.change.length),r.change=null,n=null,o=null,l=null,u=null,i=null,s=null,t=null,a=null,r=null,d=null,g=null,v=null,m=null,_=null,f=null,b=null,this)delete this[e]},g()}function o({color_picker:e=null}){let t=this,n=e.root.querySelector(".color-picker-brightness-control"),o=n.querySelector("canvas"),l=n.querySelector(".color-picker-brightness-control-thumb"),u=!1,i={thumb_mousedown:null,canvas_mousedown:null,document_mousemove:null,document_mouseup:null},s={change:[]},a=e.color.v;Object.defineProperty(t,"value",{get:function(){return a},set:function(e){null!=e&&(e>100&&(e=100),e<0&&(e=0),a=e,t.update())},enumerable:!0,configurable:!0});let r=function(e,...n){s[e].forEach(e=>e(...n,t))};this.on=function(e,t){return s[e]=s[e]||[],s[e].push(t),this},this.off=function(e,t){const n=s[e]||[],o=n.indexOf(t);return~o&&n.splice(o,1),this};let h=function(){p(),d(),g()},p=function(){let t=c.getBoundingBox(o);o.width=t.width,o.height=t.height;let n=o.getContext("2d").createLinearGradient(0,0,0,o.height),l=c.hsvToRgb(e.color.h,e.color.s,100),u=[0,0,0];n.addColorStop(0,"rgb("+l[0]+","+l[1]+","+l[2]+")"),n.addColorStop(1,"rgb("+u[0]+","+u[1]+","+u[2]+")"),o.getContext("2d").fillStyle=n,o.getContext("2d").fillRect(0,0,o.width,o.height)},d=function(){let n=c.getBoundingBox(o),i=c.getBoundingBox(l);l.style.backgroundColor=e.color.toRGB().toString(),l.style.left=n.width/2-i.width/2+"px",u||(l.style.top=-i.height/2+n.height*((100-t.value)/100)+"px"),l.dataset.value=t.value},g=function(){i.thumb_mousedown=function(e){document.selection?document.selection.empty():window.getSelection().removeAllRanges(),u=!0},l.addEventListener("mousedown",i.thumb_mousedown,!0),l.addEventListener("touchstart",i.thumb_mousedown,!0),i.canvas_mousedown=function(e){document.selection?document.selection.empty():window.getSelection().removeAllRanges(),u=!0;let n=e.touches?e.touches[0].pageY:e.pageY,i=c.getBoundingBox(o),s=c.getBoundingBox(l);l.style.left=i.width/2-s.width/2+"px",i.top<=n+s.height/2&&n+s.height/2<=i.top+i.height?l.style.top=n-i.top+"px":i.top>n+s.height/2?l.style.top=-s.height/2+"px":l.style.top=i.height-s.height/2+"px",i=c.getBoundingBox(o),s=c.getBoundingBox(l);let a=100-(s.top+s.height/2-i.top)/i.height*100;t.value=a,l.dataset.value=a,r("change",t.value)},o.addEventListener("mousedown",i.canvas_mousedown,!0),o.addEventListener("touchstart",i.canvas_mousedown,!0),i.document_mousemove=function(e){if(u){e.preventDefault(),e.stopImmediatePropagation();let n=e.touches?e.touches[0].pageY:e.pageY,u=c.getBoundingBox(o),i=c.getBoundingBox(l);l.style.left=u.width/2-i.width/2+"px",u.top<=n+i.height/2&&n+i.height/2<=u.top+u.height?l.style.top=n-u.top+"px":u.top>n+i.height/2?l.style.top=-i.height/2+"px":l.style.top=u.height-i.height/2+"px",u=c.getBoundingBox(o),i=c.getBoundingBox(l);let s=100-(i.top+i.height/2-u.top)/u.height*100;t.value=s,l.dataset.value=s,r("change",t.value)}},document.addEventListener("mousemove",i.document_mousemove,!0),document.addEventListener("touchmove",i.document_mousemove,{passive:!1}),i.document_mouseup=function(e){u=!1},document.addEventListener("mouseup",i.document_mouseup,!0),document.addEventListener("touchend",i.document_mouseup,!0)},v=function(){l.removeEventListener("mousedown",i.thumb_mousedown,!1),l.removeEventListener("touchstart",i.thumb_mousedown,!1),o.removeEventListener("mousedown",i.canvas_mousedown,!1),o.removeEventListener("touchstart",i.canvas_mousedown,!1),document.removeEventListener("mousemove",i.document_mousemove,!1),document.removeEventListener("touchmove",i.document_mousemove,!1),document.removeEventListener("mouseup",i.document_mouseup,!1),document.removeEventListener("touchend",i.document_mouseup,!1)};this.update=function(e){p(),d()},this.dispose=function(){for(var e in v(),this.value=null,a=null,i.thumb_mousedown=null,i.canvas_mousedown=null,i.document_mousemove=null,i.document_mouseup=null,s.change.splice(0,s.change.length),s.change=null,t=null,n=null,o=null,l=null,u=null,i=null,s=null,r=null,h=null,p=null,d=null,g=null,v=null,this)delete this[e]},h()}function l(e){this.root=e,this.min=Number(e.dataset.min),this.max=Number(e.dataset.max),this.step=Number(e.dataset.step)||1;let t=this,n=e.querySelector(".range-input"),o=e.querySelector(".range-input-progress"),l=e.querySelector(".range-input-value"),u=document.createElement("div"),i=!1,s=!1,a=null,r={root_mousedown:null,input_focusout:null,input_keyup:null},h={focus:[],blur:[],change:[]},p=Number(e.dataset.value)||0;Object.defineProperty(t,"value",{get:function(){return p},set:function(e){null!=e&&(null!=t.max&&e>t.max&&(e=t.max),null!=t.min&&e<t.min&&(e=t.min),p=c.round(Number(e),c.countDecimals(t.step)),n.value=p,l.innerHTML=p,null!=t.max&&(o.style.width=p/t.max*100+"%"),g("change",t.value))},enumerable:!0,configurable:!0});let d=!1;Object.defineProperty(t,"isFocused",{get:function(){return d},set:function(e){null!=e&&(d=e,d?(t.root.classList.add("range-input-control--focused"),g("focus",t)):(g("blur",t),t.root.classList.remove("range-input-control--focused")))},enumerable:!0,configurable:!0});let g=function(e,...n){h[e].forEach(e=>e(...n,t))};this.on=function(e,t){return h[e]=h[e]||[],h[e].push(t),this},this.off=function(e,t){const n=h[e]||[],o=n.indexOf(t);return~o&&n.splice(o,1),this};let v=function(){n.value=t.value,l.innerHTML=Number(t.value).toFixed(c.countDecimals(t.step)),null!=t.max&&(o.style.width=t.value/t.max*100%NaN),m()},m=function(){r.root_mousedown=function(e){if(e.stopPropagation(),t.root.classList.contains("range-input-control--disabled")||t.root.classList.contains("range-input-control--mouse-move-mode")||t.root.classList.contains("range-input-control--key-input-mode"))return;t.isFocused=!0;let o=e.touches?e.touches[0].pageX:e.pageX;e.touches?e.touches[0].pageY:e.pageY;i=!0,s=!0,a=o,document.body.appendChild(u),u.focus(),t.root.classList.contains("range-input-control--mouse-move-mode")||t.root.classList.add("range-input-control--mouse-move-mode");let l=t.root.getBoundingClientRect(),r=function(e){if(!s)return;i=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();let n=e.touches?e.touches[0].pageX:e.pageX,o=(e.touches?e.touches[0].pageY:e.pageY,(n-a)/l.width*(t.max-t.min));0==n?t.value=t.value-t.step:n==window.screen.width-1?t.value=t.value+t.step:t.value=t.value+o,a=n},c=function(e){s&&(s=!1,t.root.classList.contains("range-input-control--mouse-move-mode")&&t.root.classList.remove("range-input-control--mouse-move-mode"),null!=u&&null!=u.parentNode&&document.body.removeChild(u)),i?(t.root.classList.contains("range-input-control--key-input-mode")||t.root.classList.add("range-input-control--key-input-mode"),n.focus(),n.select()):t.isFocused=!1,document.removeEventListener("mouseup",c,!1),document.removeEventListener("touchend",c,!1),document.removeEventListener("mousemove",r,!1),document.removeEventListener("touchmove",r,!1)};document.addEventListener("mouseup",c,{once:!0}),document.addEventListener("touchend",c,{once:!0}),document.addEventListener("mousemove",r,{passive:!1}),document.addEventListener("touchmove",r,{passive:!1})},t.root.addEventListener("mousedown",r.root_mousedown,!0),t.root.addEventListener("touchstart",r.root_mousedown,!0),r.input_focusout=function(e){t.root.classList.contains("range-input-control--key-input-mode")&&t.root.classList.remove("range-input-control--key-input-mode"),this.value=t.value,t.isFocused=!1},n.addEventListener("focusout",r.input_focusout),r.input_keyup=function(e){27===e.keyCode&&(e.preventDefault(),t.root.classList.contains("range-input-control--key-input-mode")&&t.root.classList.remove("range-input-control--key-input-mode"),this.value=t.value,t.isFocused=!1),13===e.keyCode&&(e.preventDefault(),t.root.classList.contains("range-input-control--key-input-mode")&&t.root.classList.remove("range-input-control--key-input-mode"),t.value=this.value,t.isFocused=!1)},n.addEventListener("keyup",r.input_keyup)},_=function(){t.root.removeEventListener("mousedown",r.root_mousedown,!1),t.root.removeEventListener("touchstart",r.root_mousedown,!1),n.removeEventListener("focusout",r.input_focusout,!1),n.removeEventListener("keyup",r.input_keyup,!1)};this.dispose=function(){for(var e in _(),this.value=null,p=null,this.isFocused=null,d=null,this.min=null,this.max=null,this.step=null,this.root.parentNode.removeChild(this.root),this.root=null,r.root_mousedown=null,r.input_focusout=null,r.input_keyup=null,h.focus.splice(0,h.focus.length),h.focus=null,h.blur.splice(0,h.blur.length),h.blur=null,h.change.splice(0,h.change.length),h.change=null,h=null,t=null,n=null,o=null,l=null,u=null,i=null,s=null,a=null,r=null,h=null,g=null,v=null,m=null,_=null,this)delete this[e]},v()}function u(e){this.root=e,this.isAlphanumeric=e.dataset.isAlphanumeric||!1;let t=this,n=e.querySelector(".text-input"),o=e.querySelector(".text-input-value"),l={root_mousedown:null,input_focusout:null,input_keydown:null,input_keyup:null},u={focus:[],blur:[],change:[]},i=e.dataset.value||"";Object.defineProperty(t,"value",{get:function(){return i},set:function(e){null!=e&&(i=e,n.value=i,o.innerHTML=i,a("change",t.value))},enumerable:!0,configurable:!0});let s=!1;Object.defineProperty(t,"isFocused",{get:function(){return s},set:function(e){null!=e&&(s=e,s?(t.root.classList.add("text-input-control--focused"),a("focus",t)):(a("blur",t),t.root.classList.remove("text-input-control--focused")))},enumerable:!0,configurable:!0});let a=function(e,...n){u[e].forEach(e=>e(...n,t))};this.on=function(e,t){return u[e]=u[e]||[],u[e].push(t),this},this.off=function(e,t){const n=u[e]||[],o=n.indexOf(t);return~o&&n.splice(o,1),this};let r=function(){n.value=t.value,o.innerHTML=t.value,c()},c=function(){l.root_mousedown=function(e){if(e.stopPropagation(),t.root.classList.contains("text-input-control--disabled"))return;t.isFocused=!0;let o=function(e){n.focus(),n.select()};document.addEventListener("mouseup",o,{once:!0}),document.addEventListener("touchend",o,{once:!0})},t.root.addEventListener("mousedown",l.root_mousedown,!0),t.root.addEventListener("touchstart",l.root_mousedown,!0),l.input_focusout=function(e){this.value=t.value,t.isFocused=!1},n.addEventListener("focusout",l.input_focusout,!0),l.input_keydown=function(e){let n=e.keyCode||e.charCode;t.isAlphanumeric&&(!e.key.match(/[a-zA-Z0-9]/)||0==document.getSelection().toString().length&&37!==n&&39!==n&&6==this.value.length&&8!=n&&46!=n)&&e.preventDefault()},n.addEventListener("keydown",l.input_keydown,!0),l.input_keyup=function(e){27===e.keyCode&&(e.preventDefault(),this.value=t.value,t.isFocused=!1),13===e.keyCode&&(e.preventDefault(),t.value=this.value,t.isFocused=!1)},n.addEventListener("keyup",l.input_keyup,!0)},h=function(){t.root.removeEventListener("mousedown",l.root_mousedown,!1),t.root.removeEventListener("touchstart",l.root_mousedown,!1),n.removeEventListener("focusout",l.input_focusout,!1),n.removeEventListener("keydown",l.input_keydown,!1),n.removeEventListener("keyup",l.input_keyup,!1)};this.dispose=function(){for(var e in h(),this.value=null,i=null,this.isFocused=null,s=null,this.isAlphanumeric=null,this.root.parentNode.removeChild(this.root),this.root=null,l.root_mousedown=null,l.input_focusout=null,l.input_keydown=null,l.input_keyup=null,u.focus.splice(0,u.focus.length),u.focus=null,u.blur.splice(0,u.blur.length),u.blur=null,u.change.splice(0,u.change.length),u.change=null,u=null,t=null,n=null,o=null,l=null,u=null,a=null,r=null,c=null,h=null,this)delete this[e]},r()}let i=Object.assign({container:document.body,theme:"dark",useAlpha:!0,color:{r:255,g:255,b:255}},e),s=this,a={color_wheel:null,brightness_slider:null,tab_selection_buttons:null,red_input:null,green_input:null,blue_input:null,hue_input:null,saturation_input:null,brightness_input:null,hex_input:null,alpha_input:null},r={color_change:null,color_wheel_change:null,brightness_slider_change:null,tab_selection_change:null,hue_input_change:null,saturation_input_change:null,brightness_input_change:null,red_input_change:null,green_input_change:null,blue_input_change:null,alpha_input_change:null,hex_input_change:null},c={hsvToHsl:function(e,t,n){t/=100,n/=100;const o=(2-t)*n/2;return 0!==o&&(t=1===o?0:o<.5?t*n/(2*o):t*n/(2-2*o)),[e,100*t,100*o]},hslToHsv:function(e,t,n){t/=100,n/=100,t*=n<.5?n:1-n;const o=2*t/(n+t)*100,l=100*(n+t);return[e,isNaN(o)?0:o,l]},hsvToRgb:function(e,t,n){e=e/360*6,t/=100,n/=100;const o=Math.floor(e),l=e-o,u=n*(1-t),i=n*(1-l*t),s=n*(1-(1-l)*t),a=o%6,r=[n,i,u,u,s,n][a],c=[s,n,n,i,u,u][a],h=[u,u,s,n,n,i][a];return[255*r,255*c,255*h]},rgbToHsv:function(e,t,n){e/=255,t/=255,n/=255;const o=Math.min(e,t,n),l=Math.max(e,t,n),u=l-o;let i,s;const a=l;if(0===u)i=s=0;else{s=u/l;const o=((l-e)/6+u/2)/u,a=((l-t)/6+u/2)/u,r=((l-n)/6+u/2)/u;e===l?i=r-a:t===l?i=1/3+o-r:n===l&&(i=2/3+a-o),i<0?i+=1:i>1&&(i-=1)}return[360*i,100*s,100*a]},hsvToHex:function(e,t,n){return c.hsvToRgb(e,t,n).map(e=>Math.round(e).toString(16).padStart(2,"0"))},hexToHsv:function(e){return e=e.trim().toLowerCase().replace(/ /g,"").replace(/[^A-Za-z0-9\s]/g,""),c.rgbToHsv(...e.match(/.{2}/g).map(e=>parseInt(e,16)))},hexToRgb:function(e){let t,n,o;return e=e.trim().toLowerCase().replace(/ /g,"").replace(/[^A-Za-z0-9\s]/g,""),t=e.charAt(0)+""+e.charAt(1),n=e.charAt(2)+""+e.charAt(3),o=e.charAt(4)+""+e.charAt(5),t=parseInt(t,16),n=parseInt(n,16),o=parseInt(o,16),[t,n,o]},getBoundingBox:function(e){let t=e.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop),left:t.left+(window.pageXOffset||document.documentElement.scrollLeft),width:t.width,height:t.height}},degreesToRadians:function(e){return e*(Math.PI/180)},countDecimals:function(e){return Math.floor(e.valueOf())===e.valueOf()?0:e.toString().split(".")[1].length||0},round:function(e,t){let n=Number(Math.round(e+"e"+t)+"e-"+t);return isNaN(n)?0:n}},h={open:[],change:[],close:[]};this.root=document.createElement("div"),this.container=i.container;let p=!0;Object.defineProperty(s,"isOpen",{get:function(){return p},set:function(e){null!=e&&(p=e,s.root.style.visibility=p?"visible":"collapse",g(p?"open":"close",s))},enumerable:!0,configurable:!0});let d=(new t).fromRGBa(i.color.r||255,i.color.g||255,i.color.b||255);Object.defineProperty(s,"color",{get:function(){return d},set:function(e){e instanceof t&&(d.dispose(),d=e,g("change",s.value))},enumerable:!0,configurable:!0});let g=function(e,...t){h[e].forEach(e=>e(...t,s))};this.on=function(e,t){return h[e]=h[e]||[],h[e].push(t),this},this.off=function(e,t){const n=h[e]||[],o=n.indexOf(t);return~o&&n.splice(o,1),this};let v=function(){s.root.innerHTML='\n            <div class="color-picker"> \n            <div class="color-picker-controls">\n                <div class="color-picker-controls-group" style="display: flex; flex-direction: row;height: 160px;">\n                    <div class="color-picker-wheel-control">\n                        <canvas id="wheel-canvas" class="wheel-canvas"></canvas>\n                        <div class="color-picker-wheel-control-thumb" style="top:50%; left: 50%;"></div>\n                    </div>\n                    <div class="color-picker-brightness-control">\n                        <canvas id="brightness-canvas" class="brightness-canvas"></canvas>\n                        <div class="color-picker-brightness-control-thumb" style="bottom: 0; left: 50%;"></div>\n                    </div>\n                </div>\n                <div class="color-picker-controls-group" style="flex: 1; padding-top: 0;">\n                    <div class="color-picker-input-controls">\n                        <div class="color-picker-input-controls-tab-headers">\n                            <button data-tab="rgb">RGB</button>\n                            <button data-tab="hsv" class="selected">HSV</button>\n                            <button data-tab="hex">HEX</button>\n                        </div>\n                        <div class="color-picker-input-controls-tabs">\n                            <div class="color-picker-input-controls-tab" data-tab="rgb">\n                                <div class="color-picker-red-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="255">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">R:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                                <div class="color-picker-green-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="255">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">G:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                                <div class="color-picker-blue-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="255">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">B:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="color-picker-input-controls-tab selected" data-tab="hsv">\n                                <div class="color-picker-hue-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="360">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">H:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                                <div class="color-picker-saturation-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="100">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">S:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                                <div class="color-picker-brightness-input range-input-control" data-value="0" data-step="0.01" data-min="0" data-max="100">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">V:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="color-picker-input-controls-tab" data-tab="hex">\n                                <div class="color-picker-hex-input text-input-control" data-value="000000" data-is-alphanumeric="true">\n                                    <div class="text-input-enter-block">\n                                        <input class="text-input" type="text">\n                                    </div>\n                                    <div class="text-input-details-block">\n                                        <span class="text-input-label">Hex:</span>\n                                        <span class="text-input-value">000000</span>\n                                    </div>\n                                </div>\n                            </div>'+(i.useAlpha?'<div class="color-picker-alpha-input range-input-control" data-value="255" data-step="0.01" data-min="0" data-max="255">\n                                    <div class="range-input-enter-block">\n                                        <input class="range-input" type="number">\n                                    </div>\n                                    <div class="range-input-details-block">\n                                        <span class="range-input-progress"></span>\n                                        <span class="range-input-label">A:</span>\n                                        <span class="range-input-value">0.00</span>\n                                    </div>\n                                </div>':"")+"</div>\n                    </div>\n                </div>\n            </div>\n        </div>".trim(),s.container.appendChild(s.root),s.root.dataset.theme=i.theme,s.isOpen=i.isOpen,a.color_wheel=new n({color_picker:s}),a.color_wheel.values.hue=s.color.h,a.color_wheel.values.saturation=s.color.s,a.brightness_slider=new o({color_picker:s}),a.brightness_slider.value=s.color.v,a.tab_selection_buttons=s.root.querySelectorAll(".color-picker-input-controls-tab-headers button"),a.red_input=new l(s.root.querySelector(".color-picker-red-input")),a.green_input=new l(s.root.querySelector(".color-picker-green-input")),a.blue_input=new l(s.root.querySelector(".color-picker-blue-input"));let e=c.hsvToRgb(s.color.h,s.color.s,s.color.v);a.red_input.value=e[0],a.green_input.value=e[1],a.blue_input.value=e[2],
a.hue_input=new l(s.root.querySelector(".color-picker-hue-input")),a.hue_input.value=s.color.h,a.saturation_input=new l(s.root.querySelector(".color-picker-saturation-input")),a.saturation_input.value=s.color.s,a.brightness_input=new l(s.root.querySelector(".color-picker-brightness-input")),a.brightness_input.value=s.color.v,a.hex_input=new u(s.root.querySelector(".color-picker-hex-input"));let t=c.hsvToHex(s.color.h,s.color.s,s.color.v);a.hex_input.value=t.join("").toUpperCase(),i.useAlpha&&(a.alpha_input=new l(s.root.querySelector(".color-picker-alpha-input")),a.alpha_input.value=s.color.a),m()},m=function(){r.tab_selection_change=function(e){a.tab_selection_buttons.forEach(e=>e.classList.remove("selected")),s.root.querySelectorAll(".color-picker-input-controls-tab").forEach(e=>e.classList.remove("selected")),e.target.classList.add("selected"),s.root.querySelector('.color-picker-input-controls-tab[data-tab="'+e.target.dataset.tab+'"]').classList.add("selected")},a.tab_selection_buttons.forEach(e=>e.addEventListener("click",r.tab_selection_change)),r.color_change=(()=>s.update()),s.color.on("change",r.color_change),r.color_wheel_change=function(e){s.color.h=e.hue,s.color.s=e.saturation,s.update(),g("change",s.color)},a.color_wheel.on("change",r.color_wheel_change),r.brightness_slider_change=function(e){s.color.v=e,s.update(),g("change",s.color)},a.brightness_slider.on("change",r.brightness_slider_change),r.hue_input_change=function(e){s.color.h=e,s.update(),g("change",s.color)},a.hue_input.on("change",r.hue_input_change),r.saturation_input_change=function(e){s.color.s=e,s.update(),g("change",s.color)},a.saturation_input.on("change",r.saturation_input_change),r.brightness_input_change=function(e){s.color.v=e,s.update(),g("change",s.color)},a.brightness_input.on("change",r.brightness_input_change),r.red_input_change=function(e){let t=c.rgbToHsv(a.red_input.value,a.green_input.value,a.blue_input.value);s.color.h=t[0],s.color.s=t[1],s.color.v=t[2],s.update(),g("change",s.color)},a.red_input.on("change",r.red_input_change),r.green_input_change=function(e){let t=c.rgbToHsv(a.red_input.value,a.green_input.value,a.blue_input.value);s.color.h=t[0],s.color.s=t[1],s.color.v=t[2],s.update(),g("change",s.color)},a.green_input.on("change",r.green_input_change),r.blue_input_change=function(e){let t=c.rgbToHsv(a.red_input.value,a.green_input.value,a.blue_input.value);s.color.h=t[0],s.color.s=t[1],s.color.v=t[2],s.update(),g("change",s.color)},a.blue_input.on("change",r.blue_input_change),r.hex_input_change=function(e){let t=a.hex_input.value.trim().toLowerCase().replace(/ /g,"").replace(/[^A-Za-z0-9\s]/g,""),n=c.hexToHsv(t.padEnd(6,"0"));s.color.h=n[0]||0,s.color.s=n[1]||0,s.color.v=n[2]||0,s.update(),g("change",s.color)},a.hex_input.on("change",r.hex_input_change),i.useAlpha&&(r.alpha_input_change=function(e){s.color.a=e,s.update(),g("change",s.color)},a.alpha_input.on("change",r.alpha_input_change))},_=function(){a.tab_selection_buttons.forEach(e=>e.removeEventListener("click",r.tab_selection_change)),s.color.off("change",r.color_change),a.color_wheel.off("change",r.color_wheel_change),a.brightness_slider.off("change",r.brightness_slider_change),a.hue_input.off("change",r.hue_input_change),a.saturation_input.off("change",r.saturation_input_change),a.brightness_input.off("change",r.brightness_input_change),a.red_input.off("change",r.red_input_change),a.green_input.off("change",r.green_input_change),a.blue_input.off("change",r.blue_input_change),a.hex_input.off("change",r.hex_input_change),i.useAlpha&&a.alpha_input.off("change",r.alpha_input_change)};this.open=(()=>this.isOpen=!0),this.close=(()=>this.isOpen=!1),this.update=function(){_(),a.color_wheel.values.hue=s.color.h,a.color_wheel.values.saturation=s.color.s,a.brightness_slider.value=s.color.v,a.hue_input.value=s.color.h,a.saturation_input.value=s.color.s,a.brightness_input.value=s.color.v;let e=c.hsvToRgb(s.color.h,s.color.s,s.color.v);a.red_input.value=e[0],a.green_input.value=e[1],a.blue_input.value=e[2];let t=c.hsvToHex(s.color.h,s.color.s,s.color.v);a.hex_input.value=t.join("").toUpperCase(),i.useAlpha&&(a.alpha_input.value=s.color.a),m()},this.dispose=function(){for(var e in _(),this.isOpen=null,p=null,this.color.dispose(),this.color=null,d=null,this.root.parentNode.removeChild(this.root),this.root=null,this.container=null,r.color_change=null,r.tab_selection_change=null,r.color_wheel_change=null,r.brightness_slider_change=null,r.hue_input_change=null,r.saturation_input_change=null,r.brightness_input_change=null,r.red_input_change=null,r.green_input_change=null,r.blue_input_change=null,r.alpha_input_change=null,r.hex_input_change=null,h.open.splice(0,h.open.length),h.open=null,h.change.splice(0,h.change.length),h.change=null,h.close.splice(0,h.close.length),h.close=null,a.color_wheel.dispose(),a.color_wheel=null,a.brightness_slider.dispose(),a.brightness_slider=null,a.tab_selection_buttons=null,a.red_input.dispose(),a.red_input=null,a.green_input.dispose(),a.green_input=null,a.blue_input.dispose(),a.blue_input=null,a.hue_input.dispose(),a.hue_input=null,a.saturation_input.dispose(),a.saturation_input=null,a.brightness_input.dispose(),a.brightness_input=null,a.hex_input.dispose(),a.hex_input=null,i.useAlpha&&a.alpha_input.dispose(),a.alpha_input=null,i=null,s=null,a=null,r=null,h=null,c=null,g=null,v=null,m=null,_=null,this)delete this[e]},v()}